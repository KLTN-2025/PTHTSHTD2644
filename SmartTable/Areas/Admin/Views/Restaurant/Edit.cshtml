@model SmartTable.Models.Restaurants
@{
    ViewBag.Title = "Chỉnh sửa Nhà hàng";
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
}

<h1 class="text-2xl font-bold text-gray-800 mb-6">Chỉnh sửa Nhà hàng</h1>

@using (Html.BeginForm())
{

    @Html.AntiForgeryToken()
    @Html.HiddenFor(model => model.restaurant_id)

    <div class="bg-white p-6 rounded-lg shadow-lg max-w-3xl mx-auto">
        @Html.ValidationSummary(true, "", new { @class = "text-red-500 mb-4 text-sm" })

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Tên nhà hàng -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Tên Nhà hàng</label>
                @Html.TextBoxFor(model => model.name, new { @class = "w-full border-gray-300 rounded-lg p-2 focus:ring focus:ring-blue-200" })
                @Html.ValidationMessageFor(model => model.name, "", new { @class = "text-red-500 text-xs mt-1" })
            </div>

            <!-- Chủ sở hữu -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Chủ sở hữu</label>
                @Html.DropDownListFor(model => model.user_id, (SelectList)ViewBag.user_id, "--- Chọn Chủ sở hữu ---", new { @class = "w-full border-gray-300 rounded-lg p-2 focus:ring focus:ring-blue-200" })
                @Html.ValidationMessageFor(model => model.user_id, "", new { @class = "text-red-500 text-xs mt-1" })
            </div>

            <!-- Địa chỉ -->
            <div class="md:col-span-2">
                <label class="block text-sm font-medium text-gray-700 mb-1">Địa chỉ</label>
                @Html.TextBoxFor(model => model.address, new { @class = "w-full border-gray-300 rounded-lg p-2 focus:ring focus:ring-blue-200" })
                @Html.ValidationMessageFor(model => model.address, "", new { @class = "text-red-500 text-xs mt-1" })
            </div>

            <!-- Latitude -->
            <div>
                <label for="latitudeStr" class="block text-sm font-medium text-gray-700">Latitude (Vĩ độ)</label>
                @* Dùng TextBox thủ công để đặt tên tham số là latitudeStr *@
                <input type="text" name="latitudeStr" id="latitudeStr"
                       value="@(Model.latitude?.ToString(System.Globalization.CultureInfo.InvariantCulture))"
                       class="w-full p-2 border rounded-lg" placeholder="VD: 12.675916" />
                @Html.ValidationMessageFor(model => model.latitude, "", new { @class = "text-red-500 text-xs mt-1" })
            </div>

            <!-- Longitude -->
            <div>
                <label for="longitudeStr" class="block text-sm font-medium text-gray-700">Longitude (Kinh độ)</label>
                @* Dùng TextBox thủ công để đặt tên tham số là longitudeStr *@
                <input type="text" name="longitudeStr" id="longitudeStr"
                       value="@(Model.longitude?.ToString(System.Globalization.CultureInfo.InvariantCulture))"
                       class="w-full p-2 border rounded-lg" placeholder="VD: 108.012986" />
                @Html.ValidationMessageFor(model => model.longitude, "", new { @class = "text-red-500 text-xs mt-1" })
            </div>

            <!-- Giờ mở cửa -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Giờ mở cửa</label>
                @Html.TextBoxFor(model => model.opening_hours, new { @class = "w-full border-gray-300 rounded-lg p-2 focus:ring focus:ring-blue-200" })
                @Html.ValidationMessageFor(model => model.opening_hours, "", new { @class = "text-red-500 text-xs mt-1" })
            </div>

            <!-- Số bàn tối đa -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Số bàn tối đa</label>
                @Html.TextBoxFor(model => model.max_tables, new { @class = "w-full border-gray-300 rounded-lg p-2 focus:ring focus:ring-blue-200" })
                @Html.ValidationMessageFor(model => model.max_tables, "", new { @class = "text-red-500 text-xs mt-1" })
            </div>

            <!-- Trạng thái duyệt -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Trạng thái duyệt</label>
                @Html.DropDownListFor(model => model.is_approved, new SelectList(new[] {
                    new { Value = true, Text = "Đã duyệt" },
                    new { Value = false, Text = "Chờ duyệt" }
                }, "Value", "Text", Model.is_approved),
                new { @class = "w-full border-gray-300 rounded-lg p-2 focus:ring focus:ring-blue-200" })
                @Html.ValidationMessageFor(model => model.is_approved, "", new { @class = "text-red-500 text-xs mt-1" })
            </div>

            <!-- Ảnh -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Ảnh đại diện (URL)</label>
                @Html.TextBoxFor(model => model.Image, new { @class = "w-full border-gray-300 rounded-lg p-2 focus:ring focus:ring-blue-200" })
                @Html.ValidationMessageFor(model => model.Image, "", new { @class = "text-red-500 text-xs mt-1" })

                @if (!string.IsNullOrEmpty(Model.Image))
                {
                    <img src="@Model.Image" alt="Ảnh nhà hàng" class="mt-3 w-full rounded-md border shadow-sm" />
                }
            </div>

            <!-- Mô tả -->
            <div class="md:col-span-2">
                <label class="block text-sm font-medium text-gray-700 mb-1">Mô tả chi tiết</label>
                @Html.TextAreaFor(model => model.description, 5, 40, new { @class = "w-full border-gray-300 rounded-lg p-2 focus:ring focus:ring-blue-200" })
                @Html.ValidationMessageFor(model => model.description, "", new { @class = "text-red-500 text-xs mt-1" })
            </div>
        </div>

        <!-- Nút hành động -->
        <div class="flex justify-between items-center mt-8 border-t pt-6">
            <a href="@Url.Action("Index")" class="text-gray-600 hover:text-gray-900 text-sm font-medium">
                <i class="fas fa-arrow-left mr-1"></i> Quay lại danh sách
            </a>
            <button type="submit" class="px-5 py-2.5 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 transition">
                <i class="fas fa-save mr-1"></i> Lưu thay đổi
            </button>
        </div>
    </div>
}
