@model IEnumerable<SmartTable.Models.PartnerLeads>
@{
    ViewBag.Title = "Duyệt Đối Tác Tiềm Năng";
    // Layout đã được set trong _ViewStart.cshtml
}

<h1 class="text-2xl font-bold text-gray-800 mb-4">Duyệt Đối Tác Đăng Ký</h1>
<p class="mb-4 text-gray-600">Danh sách các nhà hàng mới đăng ký đang chờ duyệt (Trạng thái: "Mới").</p>

@if (TempData["SuccessMessage"] != null)
{
    <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-6" role="alert">
        @TempData["SuccessMessage"]
    </div>
}

<div class="bg-white shadow-lg rounded-lg overflow-hidden">
    <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
            <tr>
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Tên Nhà Hàng
                </th>
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Người Liên Hệ
                </th>
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Điện thoại
                </th>
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Ngày Đăng Ký
                </th>
                <th scope="col" class="relative px-6 py-3">
                    <span class="sr-only">Hành động</span>
                </th>
            </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
            @foreach (var item in Model)
            {
                <tr>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-medium text-gray-900">@Html.DisplayFor(modelItem => item.RestaurantName)</div>
                        <div class="text-sm text-gray-500">@Html.DisplayFor(modelItem => item.Email)</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-gray-900">@Html.DisplayFor(modelItem => item.ContactName)</div>
                        <div class="text-sm text-gray-500">@Html.DisplayFor(modelItem => item.ContactRole)</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                        @Html.DisplayFor(modelItem => item.ContactPhone)
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                        @item.SubmittedDate.ToString("dd/MM/yyyy")
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2">
                        @using (Html.BeginForm("ApprovePartner", "Dashboard", new { area = "Admin", leadId = item.LeadId }, FormMethod.Post))
                        {
                            @Html.AntiForgeryToken()
                            <button type="submit" class="px-4 py-2 bg-blue-600 text-white font-semibold rounded-md shadow hover:bg-blue-700 transition"
                                    onclick="return confirm('Bạn có chắc muốn DUYỆT đối tác @item.RestaurantName và tạo tài khoản cho họ?');">
                                <i class="fas fa-check-circle mr-1"></i>
                                Duyệt
                            </button>
                        }
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>