@model SmartTable.Models.Restaurants
@{
    ViewBag.Title = "Chỉnh sửa: " + Model.name;
    Layout = "~/Views/Shared/_BusinessLayout.cshtml";
}

<div class="p-6">
    <h1 class="text-2xl font-bold text-gray-800 mb-6 border-b pb-4">
        <i class="fas fa-edit text-orange-600 mr-2"></i> Chỉnh Sửa Thông Tin Nhà Hàng
    </h1>

    @if (TempData["SuccessMessage"] != null)
    {
        <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-6" role="alert">
            @TempData["SuccessMessage"]
        </div>
    }
    @Html.ValidationSummary(true, "", new { @class = "text-red-600 text-sm bg-red-100 p-3 rounded-md mb-6" })

    @using (Html.BeginForm("EditRestaurant", "BusinessHome", FormMethod.Post, new { @class = "space-y-6" }))
    {
        @Html.AntiForgeryToken()
        @Html.HiddenFor(model => model.restaurant_id) @* Giữ lại ID nhà hàng *@
        @Html.HiddenFor(model => model.user_id) @* Giữ lại ID User *@
        
        <div class="grid md:grid-cols-2 gap-6 bg-white p-6 rounded-lg shadow-sm border border-gray-100">
            
            <div>
                <label for="name" class="block text-sm font-medium text-gray-700 mb-1">Tên Nhà hàng</label>
                @Html.TextBoxFor(model => model.name, new { @class = "w-full px-4 py-2 border rounded-lg focus:ring-blue-500", required = "required" })
                @Html.ValidationMessageFor(model => model.name, "", new { @class = "text-red-600 text-xs" })
            </div>

            <div class="md:col-span-2">
                <label for="address" class="block text-sm font-medium text-gray-700 mb-1">Địa chỉ</label>
                @Html.TextBoxFor(model => model.address, new { @class = "w-full px-4 py-2 border rounded-lg focus:ring-blue-500", required = "required" })
            </div>
            
            <div>
                <label for="opening_hours" class="block text-sm font-medium text-gray-700 mb-1">Giờ mở cửa (VD: 10:00 - 22:00)</label>
                @Html.TextBoxFor(model => model.opening_hours, new { @class = "w-full px-4 py-2 border rounded-lg focus:ring-blue-500", required = "required" })
            </div>
            
            <div>
                <label for="max_tables" class="block text-sm font-medium text-gray-700 mb-1">Số lượng bàn tối đa</label>
                @Html.TextBoxFor(model => model.max_tables, new { @class = "w-full px-4 py-2 border rounded-lg focus:ring-blue-500", type = "number", min = "1", required = "required" })
            </div>
            
            <div class="md:col-span-2">
                <label for="Image" class="block text-sm font-medium text-gray-700 mb-1">URL Ảnh đại diện</label>
                @Html.TextBoxFor(model => model.Image, new { @class = "w-full px-4 py-2 border rounded-lg focus:ring-blue-500", placeholder = "Dán URL ảnh vào đây" })
                <small class="text-gray-500">Ảnh hiện tại:</small> 
                @if (!string.IsNullOrEmpty(Model.Image))
                {
                    <img src="@Model.Image" alt="Ảnh hiện tại" class="w-32 h-20 object-cover mt-2 rounded-md border" />
                }
            </div>

            <div class="md:col-span-2">
                <label for="description" class="block text-sm font-medium text-gray-700 mb-1">Mô tả chi tiết</label>
                @Html.TextAreaFor(model => model.description, new { @class = "w-full px-4 py-2 border rounded-lg focus:ring-blue-500", rows = 4 })
            </div>
            
            <div class="md:col-span-2 pt-4 border-t flex justify-end space-x-3">
                <a href="@Url.Action("Profile", "BusinessHome")" class="px-5 py-2.5 rounded-lg text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 transition">
                    Hủy bỏ
                </a>
                <button type="submit" class="inline-flex items-center px-5 py-2.5 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 transition">
                    <i class="fas fa-save mr-2"></i> Lưu thay đổi
                </button>
            </div>
        </div>
    }
</div>