@model SmartTable.Models.User
@{
    ViewBag.Title = "Đăng nhập - SmartTable";
}
@* Thêm link đến file CSS tùy chỉnh *@
<link href="~/Content/Account/login.css" rel="stylesheet" />

<div class="min-h-screen flex items-center justify-center animated-bg px-4 py-10">
    <div class="login-card">
        <div class="text-center mb-6">
            <h1 class="text-3xl font-extrabold bg-gradient-to-r from-blue-600 to-orange-500 bg-clip-text text-transparent">
                SmartTable
            </h1>
            <p class="text-gray-500 text-sm mt-2">Hệ thống quản lý đặt bàn nhà hàng</p>
        </div>

        @if (TempData["RegisterSuccess"] != null)
        {
            <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-2 rounded-md text-center mb-4">
                @TempData["RegisterSuccess"]
            </div>
        }

        @* ValidationSummary sẽ được style bằng CSS mới *@
        @Html.ValidationSummary(true) @* Bỏ class *@

        @using (Html.BeginForm("Login", "Account", FormMethod.Post))
        {
            @Html.AntiForgeryToken()

            <div class="input-box">
                <i class="fas fa-envelope"></i>
                @Html.TextBoxFor(m => m.email, new { placeholder = "Địa chỉ Email", type = "email", required = "required" })
            </div>
            @Html.ValidationMessageFor(m => m.email) @* Bỏ class *@

            <div class="input-box">
                <i class="fas fa-lock"></i>
                @Html.PasswordFor(m => m.password_hash, new { placeholder = "Mật khẩu", id = "password", required = "required" })
                <i id="togglePassword" class="far fa-eye"></i> @* Giữ lại ID và class icon ban đầu *@
            </div>
            @Html.ValidationMessageFor(m => m.password_hash) @* Bỏ class *@

            <div class="flex justify-end mb-4">
                <a href="@Url.Action("ForgotPassword", "Account")" class="text-sm text-blue-600 hover:underline">
                    Quên mật khẩu?
                </a>
            </div>

            <button type="submit" class="btn-login">
                <i class="fas fa-sign-in-alt"></i> Đăng nhập
            </button>

            <div class="divider">Hoặc</div>

            <button type="button" class="btn-google">
                <img src="https://www.svgrepo.com/show/355037/google.svg" width="18" height="18" alt="Google icon" />
                Đăng nhập bằng Google
            </button>

            <p class="text-center text-sm text-gray-600 mt-5">
                Chưa có tài khoản?
                <a href="@Url.Action("Register", "Account")"
                   class="text-orange-500 font-semibold hover:underline">
                    Đăng ký ngay
                </a>
            </p>
        }
    </div>
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    <script>
        // Toggle hiện / ẩn mật khẩu
        const togglePassword = document.getElementById('togglePassword');
        const passwordInput = document.getElementById('password');
        togglePassword ?.addEventListener('click', () => {
            const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordInput.setAttribute('type', type);
            // Toggle class icon
            togglePassword.classList.toggle('fa-eye');
            togglePassword.classList.toggle('fa-eye-slash');
        });
    </script>
}